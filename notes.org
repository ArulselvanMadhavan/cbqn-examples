* Toposim utilities
#+begin_src bqn
Mat â† â¥ŠâŸœ(â†•Ã—Â´)
Enumerate â† (âˆ¾âŒœ)Â´âˆ˜(â†•Â¨)

BuildConn â† â‹ˆâŒœËœâ¥Š
Last â† Â¯1âŠ¸âŠ‘
DimMultFactors â† (âŠÂ»Ã—`)âŒ¾âŒ½
dims â† 4â€¿4â€¿5
dims_enum â† â¥ŠEnumerate dims
switches â† Mat dims
conns â† BuildConn switches
mdims â† DimMultFactors dims
GenNeighbors â† {ğ•Šğ•©:
  dim_id â† ğ•©
  InsertDim â† {ğ•¨ğ•Šğ•©:
    ğ•©âŒ¾(ğ•¨âŠ¸âŠ‘) dim_id
  }
  GenDimExclude â† /âˆ˜â‰ âŸœâ†•
  DimVariants â† {ğ•Šğ•©:
    dim_idx â† ğ•©
    dim_lenâ€¿dim_val â† dim_idxâŠ¸âŠ‘Â¨ dimsâ€¿dim_id
    d3 â† dim_val GenDimExclude dim_len
    dim_idx InsertDimÂ¨ d3
  }
  âˆ¾DimVariantsÂ¨â†•â‰ dims
}
IdToDim â† âŠ‘âˆ˜(/âŸœdims_enum)âˆ˜(â¥Šâˆ˜â·Ëœ)
â€¢Show switches IdToDim 12
#+end_src
