âŸ¨âŸ¨red, white, blackâŸ©â‡color, raylibâŸ©â†râ†â€¢Import "../rayed-bqn/rayed.bqn"
recâ†20
spacing â† 40
ctrlPtOffset â† 100
dims â† 9â€¿9
dims_xy â† dims âˆ¾ 2
gridâ†spacing + (rec+spacing)Ã—>â¥Šâ†•dims
r.window.SetSize 0.5

DrawBezier â† {râ€¿gâ€¿bâ€¿ağ•Š[x1â€¿y1â‹„x2â€¿y2]:
    ctrlPts â† (âˆ¾âŸœ((+âŸœctrlPtOffsetâ€¿0)â‰((Â¯1Ã—ctrlPtOffset)â€¿0âŠ¸+)))Ë˜ ğ•©
    arg1 â† â‹ˆâ¥Š<Ë˜Ë˜ctrlPts
    args â† arg1âˆ¾4âˆ¾2.0â‹ˆğ•¨
    raylib.DrawSplineBezierCubic args
}â‰1â€¿2

PerFrame â† {ğ•¤
    pos â† r.mouse.GetPos@
    ellipseGrid â† {â‰âŸœ(+âŸœrec)}Ë˜ grid
    {white r.draw.EllipseOutline ğ•©}Ë˜ ellipseGrid
    midpts â† Ã·âŸœ2âˆ˜+Ëâ‰2 ellipseGrid
    midpts_xy â† dims_xy â¥Š midpts
    oneoff â† 1âŒ½Ë˜midptsxy
    lineGrid â† midptsxy >âˆ˜â‹ˆË˜Ë˜ oneoff
    linesFlag â† midptsxy (Â¯1âŠ¸âŠ‘âˆ˜<)Ë˜Ë˜ oneoff
    curvesFlag â† Â¬linesFlag
    curves â† curvesFlag /Ë˜ lineGrid
    lines â† linesFlag /Ë˜ lineGrid
    {red DrawBezier ğ•©}Ë˜ curves
    {red r.draw.Line ğ•©} lines
} r.draw._withCanvasâŸœblack

PerFrameâ€¢_While_(Â¬r.window.ShouldClose)r.window._openAs "HyperX"
